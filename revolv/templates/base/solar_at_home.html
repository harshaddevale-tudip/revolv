{% extends "base/base.html" %}
{% load staticfiles %}
{% load humanize %}
{% load wagtailimages_tags %}

{% block title %}Home | {% endblock %}
{% block head %}
    <script>
    $(document).ready(function() {
        $('.dropdown-title').on('click', function() {
    $('.dropdown-menu').toggle();
    });
    $('.option').on('click', function() {
        $(this).closest('.dropdown-menu').hide();
        $(this).parents('.dropdown').find('.dropdown-title span:first-child').text($(this).html());
        $(this).parents('.dropdown').find('.dropdown-select').val($(this).html());
        selectedValue=$(this).data("selected-state");
        changeFunc(selectedValue);
    });

     function changeFunc(selectedValue) {
       var states = ["AL","AK", "AZ"];
       var images = ["/static/images/EnergySale.png", "/static/images/Sungevity.png", "/static/images/Pick_my_Solar.png"];
        for (i=0;i<4;i++)
        {
            if (selectedValue == states[i])
            {
                $("#img").attr("src",images[i]);
            }
        }
   }
    $(document).click(function (event) {
        var clickover = $(event.target);
        var _opened = $(".navbar-collapse").hasClass("collapse in");
        if (_opened === true ) {
            $("button.navbar-toggle").click();
        }
    });

    });


  </script>

    <style>
    .dropdown-triangle {
        float: right;
        padding-right: 2%;

    }

a.How_it_Works:hover {
    text-decoration: none;
    color: #fff;
}

.header.top-section-header {
    background-color: rgba(0, 0, 0, 0);
    box-shadow: 0 15px 25px rgba(0, 0, 0, 0);
    margin-top: 0;
    position: absolute;
}

.menu-list {
    position: absolute;
    width: 100%;
    background-image: linear-gradient(to bottom,transparent 0,transparent 100%);
    background-color: transparent;
    border: transparent;
    border-radius: 0;
    box-shadow: none;
}
.burger-sub-menu {
  display: block;
}
.header .solar_at_home_rights .btn-yellow {
    <!--background-color: rgb(255, 204, 0);-->
    <!--padding: 0px 84px 0 0;-->
        border-radius: 6%;
    background-color: rgb(255, 204, 0);
    color: black;
    /* width: 30%; */
    height: auto;
    line-height: normal;
    padding: 2vmin 1%;
}
.header .solar_at_home_rights {
     padding: 3vmin 2vmin 0 0;
}
<!--.header a.btn-yellow, .header.after-scroll-header a.btn-yellow {-->
    <!--text-decoration: none;-->
    <!--color: #333;-->
    <!--}-->

    .hamburger_color {
        border-color: transparent;
        color: white;
    }
    .background-collapse-color {
            background-color: white;
    }

    </style>

{%endblock%}
{% block nav %}
<div class="modal fade" id="popup" role="dialog">
    <div class="modal-dialog" style="padding:14vmin 8% 0">

      <!-- Modal content-->
      <div class="modal-content" >
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"><b>Donation to Operations</b></h4>
        </div>
        <form action="{% url 'project:stripe_operation_donation' %}" method="POST">
          {% csrf_token %}
           <div class="modal-body input-group">
                        <input type="number" name="amount_cents" value="10" step="1" class="form-control" >
                          <span class="input-group-addon">$</span>
                      </div>
          <!--<div class="modal-body">-->
            <!--<input type="email" style="width:100%" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Donation Amount">-->
          <!--</div>-->
          <div class="modal-section">
          <label class="checkbox-field-label" style="margin-left:5%;margin-bottom:5%">
            <input  id="subscribe-check" name="check" type="checkbox"><span><b>Subscribe me 					to the RE-volv donate operations.</b></span>
                </label>
          </div>
          <div class="modal-footer" style="text-align: center;">
            <button type="submit" class="stripe-button-el btn btn-primary" data-dismiss="modal">Next</button>
          </div>
        </form>
      </div>

    </div>
  </div>

{%endblock%}
{% block body %}
    <div style="height: 60vmin;
    background-image: url(/static/images/Header_image.png);
    background-size: 100vw 60vmin;
    background-repeat: no-repeat;">
       <header class="header top-section-header">
  <div class="container">
        <div class="container">
        <!-- Static navbar -->
        <div class="navbar navbar-default menu-list">
            <div class="navbar-header">
                <button type="button" id="collbtn" class="navbar-toggle hamburger_color" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span>
 <span class="icon-bar"></span>
 <span class="icon-bar"></span>

                </button> <a class="navbar-brand logo-solar-at-home" href="/"></a>

            </div>
            <div class="navbar-collapse collapse background-collapse-color">
                <ul class="nav navbar-nav">
                    {% if request.user.is_authenticated %}
                        <li><a href="{% url 'dashboard' %}" class="dropdown">MY PORTFOLIO</a>
                        </li>
                        <li class="dropdown this-works"> <a href="{% url 'logout' %}" class="dropdown">SIGN OUT</a>
                        </li>
                    {% else %}
                         <li><a href="{% url 'dashboard' %}" class="dropdown">MY PORTFOLIO</a>
                        </li>
                        <li class="dropdown this-works"> <a href="{% url 'logout' %}" class="dropdown">SIGN OUT</a>
                        </li>
                    {% endif %}
                    <li class="dropdown this-doesnt"> <a href="#" class="dropdown" data-toggle="modal" data-target="#popup">DONATE</a>
                    </li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    <!-- end .logo -->
            <div class="solar_at_home_rights pull-right">
              <div class="txt pull-left">

                {% if request.user.is_authenticated %}
                  <li class="user-controls has-dropdown">
                    <a href="{% url 'dashboard' %}" class="btn-blue pull-left btn-donate btn-yellow">MY PORTFOLIO</a>
                    <a href="{% url 'logout' %}" class="btn-blue pull-left btn-donate btn-yellow" >SIGN OUT</a>
                  </li>
                  {% else %}
                    <a href="{% url 'signin' %}#signup" class="component-link btn-blue pull-left btn-donate btn-yellow" data-component="signup" >SIGN UP</a>
                    <a href="{% url 'signin' %}#login" class="component-link btn-blue pull-left btn-donate btn-yellow" data-component="login" >SIGN IN</a>
                {% endif %}
              </div>
              <a href="#" class="component-link btn-blue btn-donate btn-yellow" data-toggle="modal" data-target="#popup" >DONATE</a>
              <!--<a #data-target="popup" data-toggle="modal" class=" btn-blue btn-donate pull-left after-scroll">DONATE NOW</a>-->
            </div>
          </div>
             <div style="width:100%;float:left;padding-top: 7vmin;">
                <div style="width:100%;padding: 0 6%;float: left;">
                  <div style="float: left;width: 50%;">
                      <div class="go_solar_at_home">
                        Want to go <br> solar at home?
                       </div>
                      <div class="we_can_help_you">
                          We are here to help you!
                      </div>

                  </div>
                  <div style="float: left;width: 50%;">
                        <div class="logo-size" >
                          <img class="background-image-size" src="/static/images/Logo_Header.png">
                        </div>
                  </div>
                </div>

            </div>
           </div>
        </header>

</div>
<!--onchange="changeFunc();"-->
<div style="width:100%;">
    <div>
        <div class="tell_us_state_where_you_live"><span>Tell us the State you lived in and we can help help you find some vetted solar installers in your area.</span></div>
        <div class="dropdown">
            <div id="dropdown-select-text" class="dropdown-select-text">
                <div id="dropdown-title" class="dropdown-title">
                    <span>Select the Country Area</span>
                    <span class="dropdown-triangle">&#x25BC;</span>
                </div>

            </div>
            <div class="dropdown-menu">
                <div class="option" data-selected-state="AL">Alabama</div>
                <div class="option" data-selected-state="AK">Alaska</div>
                <div class="option"data-selected-state="AZ" >Arizona</div>
                <div class="option">Arkansas</div>
                <div class="option">California</div>
                <div class="option">Connecticut</div>
                <div class="option">Colorado</div>
                <div class="option">Connecticut</div>
                <div class="option">Delaware</div>
                <div class="option">District Of Columbia</div>
                <div class="option">Florida</div>
                <div class="option">Georgia</div>
                <div class="option">Idaho</div>
                <div class="option">Illinois</div>
                <div class="option">Indiana</div>
                <div class="option">Iowa</div>
                <div class="option">Kansas</div>
                <div class="option">Kentucky</div>
                <div class="option">Louisiana</div>
                <div class="option">Maine</div>
                <div class="option">Maryland</div>
                <div class="option">Massachusetts</div>
                <div class="option">Michigan</div>
                <div class="option">Minnesota</div>
                <div class="option">Mississippi</div>
                <div class="option">Missouri</div>
                <div class="option">Montana</div>
                <div class="option">Nebraska</div>
                <div class="option">Nevada</div>
                <div class="option">New Hampshire</div>
                <div class="option">New Jersey</div>
                <div class="option">New Mexico</div>
                <div class="option">New York</div>
                <div class="option">North Carolina</div>
                <div class="option">North Dakota</div>
                <div class="option">Ohio</div>
                <div class="option">Oklahoma</div>
                <div class="option">Oregon</div>
                <div class="option">Pennsylvania</div>
                <div class="option">Rhode Island</div>
                <div class="option">South Carolina</div>
                <div class="option">South Dakota</div>
                <div class="option">Tennessee</div>
                <div class="option">Texas</div>
                <div class="option">Utah</div>
                <div class="option">Vermont</div>
                <div class="option">Virginia</div>
                <div class="option">Washington</div>
                <div class="option">West Virginia</div>
                <div class="option">Wisconsin</div>
                <div class="option">Wyoming</div>
            </div>

            <input type="hidden" class="dropdown-select" />
        </div>
        <!--<div class="dropdown_state">-->
            <!--<select class="dropdown_select" id="selectBox" onfocus='this.size=10;' onblur='this.size=1;'-->
                    <!--onchange='this.size=1; this.blur(); changeFunc(); '>-->
            <!--<option value="volvo" selected>Select the Country Area</option>-->
            	<!--<option value="AL">Alabama</option>-->
            <!--<option value="AK">Alaska</option>-->
            <!--<option value="AZ">Arizona</option>-->
            <!--<option value="AR">Arkansas</option>-->
            <!--<option value="CA">California</option>-->
            <!--<option value="CO">Colorado</option>-->
            <!--<option value="CT">Connecticut</option>-->
            <!--<option value="DE">Delaware</option>-->
            <!--<option value="DC">District Of Columbia</option>-->
            <!--<option value="FL">Florida</option>-->
            <!--<option value="GA">Georgia</option>-->
            <!--<option value="HI">Hawaii</option>-->
            <!--<option value="ID">Idaho</option>-->
            <!--<option value="IL">Illinois</option>-->
            <!--<option value="IN">Indiana</option>-->
            <!--<option value="IA">Iowa</option>-->
            <!--<option value="KS">Kansas</option>-->
            <!--<option value="KY">Kentucky</option>-->
            <!--<option value="LA">Louisiana</option>-->
            <!--<option value="ME">Maine</option>-->
            <!--<option value="MD">Maryland</option>-->
            <!--<option value="MA">Massachusetts</option>-->
            <!--<option value="MI">Michigan</option>-->
            <!--<option value="MN">Minnesota</option>-->
            <!--<option value="MS">Mississippi</option>-->
            <!--<option value="MO">Missouri</option>-->
            <!--<option value="MT">Montana</option>-->
            <!--<option value="NE">Nebraska</option>-->
            <!--<option value="NV">Nevada</option>-->
            <!--<option value="NH">New Hampshire</option>-->
            <!--<option value="NJ">New Jersey</option>-->
            <!--<option value="NM">New Mexico</option>-->
            <!--<option value="NY">New York</option>-->
            <!--<option value="NC">North Carolina</option>-->
            <!--<option value="ND">North Dakota</option>-->
            <!--<option value="OH">Ohio</option>-->
            <!--<option value="OK">Oklahoma</option>-->
            <!--<option value="OR">Oregon</option>-->
            <!--<option value="PA">Pennsylvania</option>-->
            <!--<option value="RI">Rhode Island</option>-->
            <!--<option value="SC">South Carolina</option>-->
            <!--<option value="SD">South Dakota</option>-->
            <!--<option value="TN">Tennessee</option>-->
            <!--<option value="TX">Texas</option>-->
            <!--<option value="UT">Utah</option>-->
            <!--<option value="VT">Vermont</option>-->
            <!--<option value="VA">Virginia</option>-->
            <!--<option value="WA">Washington</option>-->
            <!--<option value="WV">West Virginia</option>-->
            <!--<option value="WI">Wisconsin</option>-->
            <!--<option value="WY">Wyoming</option>-->
                    <!--</select></div>-->
    <!--</div>-->
    <!--<div >-->
            <div style="float:left;width:100%;">
                <div class="investors_logo">
                              <img id="img" class="investors_logo_img" src="/static/images/Sungevity.png">
                 </div>
                <div class="investors_logo_text" >
                    <span>Get sloar panels for your home and generate your own solar power with Sungevity. See how residential panels can help with a free home solar quote.</span>
                </div>
            </div>
    </div>

</div>
      <!-- Left and right controls -->

<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key={{GOOGLEMAPS_API_KEY}}">
</script>
  <!--<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.js">-->
<!--</script>-->
      <!--<script src="http://malsup.github.com/jquery.form.js"></script>-->
<script src="https://checkout.stripe.com/checkout.js"></script>
<script>
  $(function ($) {
  var handler = StripeCheckout.configure({
    key: '{{ stripe_publishable_key }}'
    , image: '{% static "images/revolv-logo.png" %}'
    , locale: 'auto'
    , name: 'RE-volv'
    , email: '{{request.user.email}}'
  });
  $(window).on('popstate', function () {
    handler.close();
  });
  $('.stripe-button-el').on('click', function (e) {
    e.preventDefault();
    var $form = $(this).closest('form');
    var serialized = $form.serializeArray();
    var endpoint = $form.attr('action');
    var amount, metadata;
    $.each(serialized, function () {
      if (this.name === 'amount_cents') {
        amount = this.value*100;
      }
      <!--if (this.name === 'metadata') {-->
        <!--metadata = this.value;-->
      <!--}-->
    });
    if (typeof amount !== 'undefined') {
      handler.open({
        description: 'Donate $' + parseFloat((amount / 100).toFixed(2)).toLocaleString()
        , amount: amount
        <!--, metadata: metadata-->
        , token: function (token) {
          var id = token.id;
          var email = token.email;
          var $id = $('<input>')
            .attr('type', 'hidden')
            .attr('name', 'stripeToken')
            .val(id);
          var $email = $('<input>')
            .attr('type', 'hidden')
            .attr('name', 'stripeEmail')
            .val(email);
          $id.appendTo($form);
          $email.appendTo($form);
          $form.trigger('submit');
        }
      });
    }
  });
});
</script>
<script>
  $(document).ready(function() {
    $('#mobile-burger-icon').click(function() {
      $('.navbar-collapse').toggleClass('burger-sub-menu');
    });
  });
  </script>
{%endblock%}